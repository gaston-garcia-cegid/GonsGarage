{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [

        {
            "name": "Launch Backend Server",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "${workspaceFolder}/backend/cmd/server/main.go",
            "cwd": "${workspaceFolder}/backend",
            "env": {
                "DATABASE_URL": "postgres://admindb:gonsgarage123@localhost:5432/gonsgarage?sslmode=disable",
                "REDIS_URL": "localhost:6379",
                "JWT_SECRET": "your-super-secret-jwt-key-change-in-production",
                "SERVER_PORT": "8080",
                "GIN_MODE": "debug"
            },
            "args": [],
            "showLog": true,
            "console": "integratedTerminal",
            "stopOnEntry": false,
            "dlvFlags": ["--check-go-version=false"]
        },
        {
            "name": "Launch Current Go File",
            "type": "go",
            "request": "launch",
            "mode": "auto",
            "program": "${file}",
            "cwd": "${workspaceFolder}/backend",
            "console": "integratedTerminal",
            "dlvFlags": ["--check-go-version=false"]
        },
        {
            "name": "Debug Backend Tests",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${workspaceFolder}/backend",
            "cwd": "${workspaceFolder}/backend",
            "args": ["-test.v"],
            "console": "integratedTerminal",
            "dlvFlags": ["--check-go-version=false"]
        },
        {
            "name": "Debug Selected Test",
            "type": "go",
            "request": "launch",
            "mode": "test",
            "program": "${fileDirname}",
            "cwd": "${workspaceFolder}/backend",
            "args": ["-test.run", "^${selectedText}$", "-test.v"],
            "console": "integratedTerminal",
            "dlvFlags": ["--check-go-version=false"]
        },
        {
            "name": "Debug NextJS localhost",
            "type": "chrome",
            "request": "launch",
            "url": "http://localhost:3000",
            "webRoot": "${workspaceFolder}"
        }
    ],
    "go.gopath": "",
    "go.goroot": "",
    "go.toolsGopath": "",
    "go.inferGopath": true,
    "go.useCodeSnippetsOnFunctionSuggest": true,
    "go.useCodeSnippetsOnFunctionSuggestWithoutType": true,
    "go.autocompleteUnimportedPackages": true,
    "go.gocodePackageLookupMode": "go",
    "go.gotoSymbol.includeImports": true,
    "go.useLanguageServer": true,
    "go.formatTool": "goimports",
    "go.lintTool": "golangci-lint",
    "go.lintFlags": [
        "--fast"
    ],
    "go.testFlags": ["-v"],
    "go.testTimeout": "30s",
    "go.coverOnSave": false,
    "go.coverOnSingleTest": true,
    "go.coverShowCounts": true,
    "files.associations": {
        "*.go": "go"
    },
    "go.toolsManagement.autoUpdate": true,
    "[go]": {
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
            "source.organizeImports": "explicit"
        },
        "editor.suggest.snippetsPreventQuickSuggestions": false,
        "editor.defaultFormatter": "golang.go"
    },
    "go.alternateTools": {
        "go": "go"
    },
    "terminal.integrated.cwd": "${workspaceFolder}",
    "files.exclude": {
        "**/node_modules": true,
        "**/dist": true,
        "**/build": true,
        "**/.next": true,
        "**/coverage": true
    },
    "tasks": [
        {
            "label": "Go: Build Backend",
            "type": "shell",
            "command": "go",
            "args": ["build", "-o", "bin/server", "cmd/server/main.go"],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": ["$go"]
        },
        {
            "label": "Go: Run Backend",
            "type": "shell",
            "command": "go",
            "args": ["run", "cmd/server/main.go"],
            "options": {
                "cwd": "${workspaceFolder}/backend",
                "env": {
                    "DATABASE_URL": "postgres://gonsgarage_user:secure_password@localhost:5432/gonsgarage?sslmode=disable",
                    "REDIS_URL": "localhost:6379",
                    "JWT_SECRET": "your-super-secret-jwt-key",
                    "SERVER_PORT": "8080",
                    "GIN_MODE": "debug"
                }
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": ["$go"]
        },
        {
            "label": "Go: Test Backend",
            "type": "shell",
            "command": "go",
            "args": ["test", "./..."],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "problemMatcher": ["$go"]
        },
        {
            "label": "Go: Clean Backend",
            "type": "shell",
            "command": "go",
            "args": ["clean", "-cache", "-modcache", "-testcache"],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            }
        },
        {
            "label": "Frontend: Install Dependencies",
            "type": "shell",
            "command": "npm",
            "args": ["install"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            }
        },
        {
            "label": "Frontend: Dev Server",
            "type": "shell",
            "command": "npm",
            "args": ["run", "dev"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared"
            },
            "isBackground": true
        }
    ]
}